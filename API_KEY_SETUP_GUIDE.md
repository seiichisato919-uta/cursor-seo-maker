# APIキーの設定確認と再生成方法

## 問題の原因

エラーメッセージから、`gemini-3-pro-preview`の無料枠の入力トークン数の制限に達していることが分かります。

これは、**APIキーが無料プランで作成されている可能性**があります。

## 解決方法

### ステップ1: Google AI StudioでAPIキーを確認

1. [Google AI Studio のAPIキーページ](https://aistudio.google.com/app/apikey) にアクセス
2. 現在使用しているAPIキーを確認
3. APIキーの詳細を確認

### ステップ2: APIキーを再生成（推奨）

有料プランが有効になった後に作成したAPIキーを使用する必要があります。

1. Google AI StudioのAPIキーページで「APIキーを作成」をクリック
2. 新しいAPIキーをコピー
3. `.env.local`ファイルを開く
4. `GEMINI_API_KEY`の値を新しいAPIキーに更新
5. 開発サーバーを再起動

### ステップ3: 有料プランの設定を確認

1. Google AI Studioで右上のアカウントアイコンをクリック
2. 「Settings」をクリック
3. 「Plan & Billing」セクションを確認
4. 有料プランが有効になっているか確認

## 重要なポイント

### APIキーとプランの関係

- **無料プランで作成したAPIキー**: 無料枠の制限が適用される
- **有料プランで作成したAPIキー**: 有料プランのクォータが適用される

### gemini-3-pro-previewの特徴

- `gemini-3-pro-preview`はプレビュー版のモデルです
- 無料枠が制限されている場合があります
- 有料プランでも、APIキーが有料プランで作成されている必要があります

## 確認すべきこと

1. **APIキーの作成時期**
   - 有料プランにアップグレードする前に作成したAPIキーは、無料プランの制限が適用される可能性があります
   - 有料プランにアップグレードした後に作成したAPIキーを使用する必要があります

2. **Google AI Studioのプラン設定**
   - 有料プランが有効になっているか確認
   - 請求アカウントがリンクされているか確認

## 次のステップ

1. Google AI StudioでAPIキーを再生成
2. `.env.local`ファイルを更新
3. 開発サーバーを再起動
4. 再度試す


